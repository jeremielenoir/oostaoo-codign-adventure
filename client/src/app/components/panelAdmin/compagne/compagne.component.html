<div class="contenu-view-content-left">
  <div>
    <div class="header-form">
      <div class="sous-header-form">
        <div class="form-group-header">
          <form>
            <span class="icon-form-group-header-contenu"><i class="fas fa-search"></i></span>
            <input type="text" name="search" [(ngModel)]="searchText" class="champ-header-contenu"
              placeholder="Filtrer par titre ou candidat" id="search-header" />
          </form>
        </div>

        <div class="form-group-header form-group-header-2">

          <label class="checked-block" for="archive">
            <mat-checkbox [(ngModel)]="checked" (click)="includeArchivedCampaigns(checked)">Inclure les campagnes
              archivées</mat-checkbox>
          </label>
        </div>
      </div>
      <app-integration-bouton></app-integration-bouton>
    </div>
  </div>

  <div class="contenu-techno">
    <div class="contenu-techno-header">
      <span class="contenu-techno-header-icon">
        <i class="far fa-list-alt"></i>
      </span>

      <h2 class="contenu-techno-header-title">
        Campagnes
      </h2>
    </div>



    <div class="content-scroll">

      <div class="no-campaign" *ngIf="campaigns.length === 0">
        <p> Vous n'avez pas encore de campagnes, cliquer sur le bouton en dessous pour en créer une.</p>
        <i class="fas fa-times-circle fa-4x icon"></i>
        <div class="button">
          <app-integration-bouton> </app-integration-bouton>
        </div>
      </div>

      <div *ngFor="let campaign of test  | orderBy:'pin':true:customComparator | filter: searchText"
        class="contenu-techno-content">
        <div class="contenu-branche">
          <a [routerLink]="['/dashboard/campaigns', campaign.id, 'candidats']">
            <p class="branche-content-text">
              {{ campaign.Name }}
            </p>

            <mat-icon *ngIf="campaign.pin === true">bookmark</mat-icon>
            <mat-icon *ngIf="campaign.archive === true">archive</mat-icon>

            <div class="branche-content-noti">
              <span class="branche-content-noti-item">
                <strong>{{ campaign.candidats.length }}</strong>
                <span>Invité</span>
              </span>
              <span class="branche-content-noti-item">
                <strong>{{ campaign.NbCandidatFinish !== null ?
                    campaign.NbCandidatFinish : 0 }}</strong>
                <span>Terminé</span>
              </span>
            </div>
          </a>
        </div>

        <div class="branche-content-list-end">
          <span class="branche-content-list-end-contenu-icon" (click)="openDialog(campaign.id)">
            <i class="far fa-user"></i>
          </span>
          <span class="branche-content-list-end-contenu-icon dashed" [matMenuTriggerFor]="menu"
            aria-label="Example icon-button with a menu">
            <mat-icon>more_vert</mat-icon>
          </span>
          <mat-menu #menu="matMenu">

            <button (click)="duplicatecampaign(campaign.id)" mat-menu-item>
              <mat-icon>file_copy</mat-icon>
              <span>Dupliquer</span>
            </button>

            <button *ngIf="campaign.pin === true" (click)="pincampaign(campaign.id, campaign.pin)" mat-menu-item>
              <mat-icon>bookmark</mat-icon>
              <span>Désépingler</span>
            </button>
            <button *ngIf="campaign.pin === false" (click)="pincampaign(campaign.id, campaign.pin)" mat-menu-item>
              <mat-icon>bookmark</mat-icon>
              <span>Epingler</span>
            </button>

            <button *ngIf="campaign.archive === true" (click)="archivecampaign(campaign.id,campaign.archive)"
              mat-menu-item>
              <mat-icon>unarchive</mat-icon>
              <span>Désarchiver</span>
            </button>
            <button *ngIf="campaign.archive === false" (click)="archivecampaign(campaign.id,campaign.archive)"
              mat-menu-item>
              <mat-icon>archive</mat-icon>
              <span>Archiver</span>
            </button>

            <button (click)="deletecampaign(campaign.id)" mat-menu-item>
              <mat-icon>delete</mat-icon>
              <span>Supprimer</span>
            </button>
          </mat-menu>
        </div>
      </div>
    </div>
  </div>
</div>